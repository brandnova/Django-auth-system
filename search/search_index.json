{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Django Authentication System Setup Guide","text":"<p>This guide provides comprehensive instructions for setting up and customizing the Django Authentication System, which includes a core authentication app (<code>accounts</code>) and an optional Two-Factor Authentication app (<code>twofactor</code>).</p>"},{"location":"#overview","title":"Overview","text":"<p>This authentication system provides a complete solution for user authentication in Django projects. It includes:</p> <ul> <li>Email-based authentication (instead of username)</li> <li>Email verification (for account activation)</li> <li>Password reset/change functionality</li> <li>Google reCAPTCHA</li> <li>User profiles with customizable fields</li> <li>Social authentication (Google, Facebook, etc.)</li> <li>Magic Links - Passwordless authentication via email</li> <li>User-controlled security preferences</li> <li>Optional Two-Factor Authentication (2FA)</li> <li>Account security settings and deletion</li> <li>Soft-delete functionality with account reactivation</li> </ul>"},{"location":"#project-structure","title":"Project Structure","text":"<p>The authentication system consists of three main apps:</p> <ol> <li><code>accounts</code>: Core authentication functionality</li> <li><code>twofactor</code>: Optional Two-Factor Authentication</li> <li><code>core</code>: Base templates and landing page</li> </ol>"},{"location":"#installation","title":"Installation","text":""},{"location":"#option-1-start-a-new-project-with-this-authentication-system","title":"Option 1: Start a New Project with This Authentication System","text":"<ol> <li> <p>Clone the repository:    <code>bash    git clone https://github.com/yourusername/django-auth-system.git    cd django-auth-system</code></p> </li> <li> <p>Create and activate a virtual environment:    <code>bash    python -m venv env    source env/bin/activate  # On Windows: env\\Scripts\\activate</code></p> </li> <li> <p>Install dependencies:    <code>bash    pip install -r requirements.txt</code></p> </li> <li> <p>Run migrations:    <code>bash    python manage.py migrate</code></p> </li> <li> <p>Create a superuser:    <code>bash    python manage.py createsuperuser_email</code></p> </li> <li> <p>Run the development server:    <code>bash    python manage.py runserver</code></p> </li> </ol>"},{"location":"#option-2-add-to-an-existing-project","title":"Option 2: Add to an Existing Project","text":"<ol> <li> <p>Copy the <code>accounts</code>, <code>twofactor</code> (optional), and <code>core</code> apps to your project:    <code>bash    cp -r accounts twofactor core /path/to/your/project/</code></p> </li> <li> <p>Add the apps to your <code>INSTALLED_APPS</code> in <code>settings.py</code>:    ```python    INSTALLED_APPS = [        # Django built-in apps        'django.contrib.admin',        'django.contrib.auth',        'django.contrib.contenttypes',        'django.contrib.sessions',        'django.contrib.messages',        'django.contrib.staticfiles',</p> <p># Third-party apps    'social_django',  # For social authentication</p> <p># Local apps    'accounts',    'twofactor',  # Optional    'core',</p> <p># Your other apps    ]    ```</p> </li> <li> <p>Configure the authentication settings (see Configuration section)</p> </li> <li>Run migrations:    <code>bash    python manage.py makemigrations    python manage.py migrate</code></li> </ol>"},{"location":"#configuration","title":"Configuration","text":""},{"location":"#basic-settings","title":"Basic Settings","text":"<p>Add the following to your <code>settings.py</code>:</p> <pre><code># Authentication settings\nAUTH_USER_MODEL = 'accounts.User'\nAUTHENTICATION_BACKENDS = [\n    'django.contrib.auth.backends.ModelBackend',\n    'accounts.backends.EmailBackend',  \n    'social_core.backends.github.GithubOAuth2', # For social auth\n    'social_core.backends.discord.DiscordOAuth2', # For social auth\n    'social_core.backends.google.GoogleOAuth2', # For social auth\n    'social_core.backends.facebook.FacebookOAuth2', # For social auth\n]\n\n# Login settings\nLOGIN_URL = 'accounts:login'\nLOGIN_REDIRECT_URL = 'accounts:profile'\nLOGOUT_REDIRECT_URL = 'home'\n\n# Email settings\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\nEMAIL_HOST = 'smtp.example.com'\nEMAIL_PORT = 587\nEMAIL_USE_TLS = True\nEMAIL_HOST_USER = 'your-email@example.com'\nEMAIL_HOST_PASSWORD = 'your-password'\nDEFAULT_FROM_EMAIL = 'Your Site &lt;noreply@example.com&gt;'\n\n# For development, you can use the console email backend\n# EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'\n\n# Media files\nMEDIA_URL = '/media/'\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\n\n# Social Authentication settings\nSOCIAL_AUTH_GOOGLE_OAUTH2_KEY = 'your-google-client-id'\nSOCIAL_AUTH_GOOGLE_OAUTH2_SECRET = 'your-google-client-secret'\n\nSOCIAL_AUTH_FACEBOOK_KEY = 'your-facebook-app-id'\nSOCIAL_AUTH_FACEBOOK_SECRET = 'your-facebook-app-secret'\nSOCIAL_AUTH_FACEBOOK_SCOPE = ['email']\n\nSOCIAL_AUTH_GITHUB_KEY= 'your-github-client-id'\nSOCIAL_AUTH_GITHUB_SECRET= 'your-github-secret-key'\n\nSOCIAL_AUTH_DISCORD_KEY = 'your-discord-key'\nSOCIAL_AUTH_DISCORD_SECRET = 'your-discord-secret'\nSOCIAL_AUTH_DISCORD_SCOPE = ['identify', 'email']  \nSOCIAL_AUTH_DISCORD_API_URL = 'https://discord.com/api'\n\nSOCIAL_AUTH_PIPELINE = (\n    'social_core.pipeline.social_auth.social_details',\n    'social_core.pipeline.social_auth.social_uid',\n    'social_core.pipeline.social_auth.auth_allowed',\n    'social_core.pipeline.social_auth.social_user',\n    'social_core.pipeline.user.get_username',\n    'social_core.pipeline.social_auth.associate_by_email',\n    'social_core.pipeline.user.create_user',\n    'accounts.pipeline.create_user_profile',  # Custom function to create user profile\n    'accounts.pipeline.set_email_verified',   # Custom function to set email as verified\n    'social_core.pipeline.social_auth.associate_user',\n    'social_core.pipeline.social_auth.load_extra_data',\n    'social_core.pipeline.user.user_details',\n)\n\n# reCAPTCHA settings\nRECAPTCHA_ENABLED = True\nRECAPTCHA_SITE_KEY = 'your-recaptcha-site-key'\nRECAPTCHA_SECRET_KEY = 'your-recaptcha-secret-key'\n\n# Magic Links settings\nMAGIC_LINK_TOKEN_LIFESPAN = 10  # Minutes before magic link expires (default: 10)\nMAGIC_LINK_VERIFY_IP = False    # Extra security: verify IP address (default: False)\n</code></pre>"},{"location":"#url-configuration","title":"URL Configuration","text":"<p>Add the following to your <code>urls.py</code>:</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('core.urls')),\n    path('accounts/', include('accounts.urls')),\n    path('2fa/', include('twofactor.urls')),  # Optional\n    path('social-auth/', include('social_django.urls', namespace='social')),\n    # Your other URL patterns\n]\n\nif settings.DEBUG:\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>"},{"location":"#redirect-handling-with-next-parameter","title":"Redirect Handling with \"next\" Parameter","text":"<p>The authentication system supports automatic redirection using the <code>next</code> parameter, allowing users to be redirected back to their original page after login or registration.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<ul> <li>When a user tries to access a protected page without being logged in, they are redirected to the login page with a <code>next</code> parameter containing the original URL</li> <li>After successful login or registration, the user is automatically redirected to the URL specified in the <code>next</code> parameter</li> <li>If no <code>next</code> parameter is provided, users are redirected to their profile page (login) or home page</li> </ul>"},{"location":"#implementation","title":"Implementation","text":"<p>The system automatically handles <code>next</code> parameters in: - Login page (<code>/accounts/login/?next=/protected-page/</code>) - Registration page (<code>/accounts/signup/?next=/protected-page/</code>) - Magic links (<code>/accounts/login/magic-link/?next=/protected-page/</code>)</p>"},{"location":"#usage-in-your-views","title":"Usage in Your Views","text":"<p>To protect a view and enable automatic redirection, use Django's <code>@login_required</code> decorator:</p> <pre><code>from django.contrib.auth.decorators import login_required\nfrom django.shortcuts import render\n\n@login_required\ndef protected_view(request):\n    # This view requires authentication\n    return render(request, 'app/protected.html')\n</code></pre> <p>When unauthenticated users access this view, they'll be automatically redirected to: <code>/accounts/login/?next=/protected-view/</code></p> <p>After login, they'll be redirected back to <code>/protected-view/</code>.</p>"},{"location":"#manual-implementation","title":"Manual Implementation","text":"<p>You can also manually pass the <code>next</code> parameter in your templates:</p> <pre><code>&lt;a href=\"{% url 'accounts:login' %}?next={{ request.path }}\" class=\"btn-login\"&gt;\n    Login to continue\n&lt;/a&gt;\n</code></pre> <p>This ensures users return to the current page after authentication.</p>"},{"location":"#customization","title":"Customization","text":""},{"location":"#templates","title":"Templates","text":"<p>The authentication system uses a base template located at <code>templates/base.html</code>. You can customize this template to match your site's design.</p> <p>All authentication templates are located in the following directories:</p> <ul> <li><code>accounts/templates/accounts/auth/</code>: Login, signup, password reset, magic links, etc.</li> <li><code>accounts/templates/accounts/profile/</code>: User profile templates</li> <li><code>accounts/templates/accounts/emails/</code>: Email templates</li> <li><code>accounts/templates/accounts/security/</code>: Security settings templates</li> <li><code>twofactor/templates/twofactor/</code>: Two-factor authentication templates</li> </ul> <p>To customize a template, modify the existing ones or create a new template with the same name in your project's template directory and delete the existing one.</p>"},{"location":"#tailwind-css-build-system","title":"Tailwind CSS Build System","text":"<p>This project ships with a dedicated Tailwind build setup located inside the <code>Tailwind/</code> directory. It works independently from Django\u2019s apps but integrates cleanly with the template system.</p> <p>The build script watches your Django templates and any static JavaScript files for class names, then compiles an optimized stylesheet to:</p> <pre><code>static/css/tailwind.css\n</code></pre> <p>Key points about the setup:</p> <ul> <li>The entire Tailwind workflow is isolated to the <code>Tailwind/</code> folder for clarity.</li> <li>Node and Tailwind CLI handle compilation; Django never processes Tailwind directly.</li> <li>Only classes actually used in templates or JS files are included in the final CSS.</li> <li>Hot-reloading is supported during development through the included watcher script.</li> <li>Production builds generate a fully minimized stylesheet.</li> </ul> <p>To understand or modify the workflow, check the documentation inside:</p> <pre><code>Tailwind/IMPORTANT.md\n</code></pre> <p>This explains how to run the dev watcher, create production builds, and adjust Tailwind config as needed.</p>"},{"location":"#user-model","title":"User Model","text":"<p>The authentication system uses a custom User model with email as the username field. You can extend this model by adding fields to the <code>UserProfile</code> model in <code>accounts/models.py</code>.</p>"},{"location":"#forms","title":"Forms","text":"<p>All forms are located in <code>accounts/forms.py</code>. You can customize these forms by subclassing them in your project.</p>"},{"location":"#views","title":"Views","text":"<p>All views are located in <code>accounts/views.py</code>. You can customize these views by subclassing them in your project.</p>"},{"location":"#magic-links-authentication","title":"Magic Links Authentication","text":"<p>The system now includes Magic Links - a modern, passwordless authentication method that allows users to log in by clicking a secure link sent to their email.</p>"},{"location":"#how-magic-links-work","title":"How Magic Links Work","text":"<ol> <li>User enters their email on the login page and chooses \"Send Magic Link\"</li> <li>System generates a secure, one-time token with configurable expiration</li> <li>User receives an email with a login link</li> <li>Clicking the link logs the user in instantly</li> <li>Token is marked as used and cannot be reused</li> </ol>"},{"location":"#features","title":"Features","text":"<ul> <li>User-controlled: Magic links must be enabled by users in their security settings (disabled by default)</li> <li>Secure: Tokens expire after configurable time (default: 10 minutes) and are single-use</li> <li>Account Reactivation: Can be used to reactivate soft-deleted accounts</li> <li>reCAPTCHA Protected: Includes reCAPTCHA verification to prevent abuse</li> <li>Email Notifications: Users receive notifications for magic link requests</li> </ul>"},{"location":"#configuration_1","title":"Configuration","text":"<p>Magic links are configured via settings:</p> <pre><code># Magic Links settings (add to your settings.py)\nMAGIC_LINK_TOKEN_LIFESPAN = 10  # Minutes before magic link expires\nMAGIC_LINK_VERIFY_IP = False    # Extra security: verify IP address matches request\n</code></pre>"},{"location":"#urls","title":"URLs","text":"<p>The magic links feature adds the following URLs:</p> <ul> <li><code>accounts:magic_link_request</code> - Request a magic link</li> <li><code>accounts:magic_link_verify</code> - Verify and use a magic link token</li> </ul>"},{"location":"#security-preferences","title":"Security Preferences","text":"<p>Users now have granular control over their security settings through the new Security tab in account settings.</p>"},{"location":"#available-preferences","title":"Available Preferences","text":"<ol> <li>Magic Links</li> <li>Enable/disable magic link authentication</li> <li>Disabled by default for security</li> <li> <p>Users must explicitly enable this feature</p> </li> <li> <p>Login Notifications</p> </li> <li>Enable/disable email notifications for new logins</li> <li>Enabled by default for security</li> <li>Includes device, browser, location, and IP details</li> <li>Strong warning when disabling for security awareness</li> </ol>"},{"location":"#user-experience","title":"User Experience","text":"<ul> <li>Intuitive Toggle Switches: Modern, accessible toggle controls</li> <li>Security Warnings: Clear warnings when disabling security features</li> <li>Educational Content: Explanations of why each feature matters</li> <li>Real-time Updates: Immediate feedback when changing preferences</li> </ul>"},{"location":"#implementation_1","title":"Implementation","text":"<p>The security preferences are managed through: - <code>UserPreferences</code> model (extends user settings) - Dedicated Security tab in account settings - Contextual warnings for security-sensitive changes - Responsive design that works on all devices</p>"},{"location":"#two-factor-authentication","title":"Two-Factor Authentication","text":"<p>The Two-Factor Authentication (2FA) app is designed to be modular and can be easily added or removed from your project.</p>"},{"location":"#enabling-2fa","title":"Enabling 2FA","text":"<ol> <li> <p>Add <code>'twofactor'</code> to your <code>INSTALLED_APPS</code> in <code>settings.py</code>:    <code>python    INSTALLED_APPS = [        # ...        'twofactor',        # ...    ]</code></p> </li> <li> <p>Add the 2FA middleware to your <code>MIDDLEWARE</code> in <code>settings.py</code> right after <code>'django.contrib.auth.middleware.AuthenticationMiddleware'</code>:    <code>python    MIDDLEWARE = [        # ...        'twofactor.middleware.TwoFactorMiddleware',  # Add after authentication middleware        # ...    ]</code></p> </li> <li> <p>Add the 2FA URLs to your project's <code>urls.py</code>:    <code>python    urlpatterns = [        # ...        path('2fa/', include('twofactor.urls')),        # ...    ]</code></p> </li> <li> <p>Add the 2FA button to the security settings template <code>accounts/templates/accounts/security/security_settings.html</code>:    ```html   Manage Two-Factor Authentication </p> </li> </ol> <p>```</p> <ol> <li>Run migrations:    <code>bash    python manage.py makemigrations twofactor    python manage.py migrate</code></li> </ol>"},{"location":"#disabling-2fa","title":"Disabling 2FA","text":"<p>To disable 2FA, simply:</p> <ol> <li>Remove <code>'twofactor'</code> from <code>INSTALLED_APPS</code></li> <li>Remove <code>'twofactor.middleware.TwoFactorMiddleware'</code> from <code>MIDDLEWARE</code></li> <li>Remove the 2FA URL pattern from your project's <code>urls.py</code></li> <li>Remove the 2FA button from your accounts security settings template</li> </ol> <p>No changes to the database are required, as the 2FA tables will simply be ignored when the app is not installed.</p>"},{"location":"#2fa-configuration","title":"2FA Configuration","text":"<p>Configure the following settings in your <code>.env</code> file and <code>settings.py</code>:</p> <p>In your <code>.env</code> file:</p> <pre><code># Two-Factor Authentication Settings\nTWO_FACTOR_VERIFICATION_WINDOW_DAYS=14        # Days before re-verification is required (default: 14)\nTWO_FACTOR_EMAIL_OTP_EXPIRY_MINUTES=10        # Minutes before email OTP expires (default: 10)\nTWO_FACTOR_EXEMPT_SUPERUSERS=false            # Exempt superusers from 2FA (default: false)\nTWO_FACTOR_EXEMPT_PATHS=/static/,/media/      # Comma-separated paths to exempt from 2FA\n</code></pre> <p>In your <code>settings.py</code>:</p> <pre><code># Two-Factor Authentication Settings\nTWO_FACTOR_VERIFICATION_WINDOW_DAYS = config('TWO_FACTOR_VERIFICATION_WINDOW_DAYS', default=14, cast=int)\nTWO_FACTOR_EMAIL_OTP_EXPIRY_MINUTES = config('TWO_FACTOR_EMAIL_OTP_EXPIRY_MINUTES', default=10, cast=int)\nTWO_FACTOR_EXEMPT_SUPERUSERS = config('TWO_FACTOR_EXEMPT_SUPERUSERS', default=False, cast=bool)\nTWO_FACTOR_EXEMPT_PATHS = config('TWO_FACTOR_EXEMPT_PATHS', default='', cast=lambda v: [s.strip() for s in v.split(',') if s.strip()])\n</code></pre> <p>Default Exempt Paths: The following paths are exempt from 2FA verification by default: - <code>/2fa/</code> - All 2FA management and verification URLs - <code>/admin/</code> - Django admin interface You can chage that from the twofactor/middleware.py code.</p> <p>Additional Path Exemptions: Add paths to <code>TWO_FACTOR_EXEMPT_PATHS</code> to exempt them from 2FA verification:</p> <pre><code># Example: Exempt static files, media, API endpoints, or health checks\nTWO_FACTOR_EXEMPT_PATHS=/static/,/media/,/api/public/,/healthcheck/\n</code></pre> <p>Superuser Exemption: Set <code>TWO_FACTOR_EXEMPT_SUPERUSERS=true</code> in your <code>.env</code> to exempt all superusers from 2FA verification (useful for emergency access).</p> <p>The 2FA system will automatically protect all authenticated views and redirect users to verification when needed, providing all-round security.</p>"},{"location":"#integration-with-other-apps","title":"Integration with Other Apps","text":""},{"location":"#social-media-platform-example","title":"Social Media Platform Example","text":"<p>If you're building a social media platform, you can integrate the authentication system as follows:</p> <ol> <li> <p>Create your social media app:    <code>bash    python manage.py startapp social</code></p> </li> <li> <p>Add the app to <code>INSTALLED_APPS</code> in <code>settings.py</code>:    <code>python    INSTALLED_APPS = [        # ...        'social',        # ...    ]</code></p> </li> <li> <p>Create models that reference the User model:    ```python    from django.db import models    from django.conf import settings</p> </li> </ol> <p>class Post(models.Model):        user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='posts')        content = models.TextField()        created_at = models.DateTimeField(auto_now_add=True)        # Other fields...</p> <p>class Follow(models.Model):        follower = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='following')        following = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='followers')        created_at = models.DateTimeField(auto_now_add=True)        # Other fields...    ```</p> <ol> <li>Create views that require authentication:    ```python    from django.shortcuts import render, redirect    from django.contrib.auth.decorators import login_required    from .models import Post</li> </ol> <p>@login_required    def create_post(request):        if request.method == 'POST':            # Process form data            # ...            return redirect('social:feed')        return render(request, 'social/create_post.html')    ```</p> <ol> <li>Add URLs for your social media app:    ```python    from django.urls import path    from . import views</li> </ol> <p>app_name = 'social'</p> <p>urlpatterns = [        path('feed/', views.feed, name='feed'),        path('post/create/', views.create_post, name='create_post'),        # Other URLs...    ]    ```</p> <ol> <li>Include your app's URLs in the project's <code>urls.py</code>:    <code>python    urlpatterns = [        # ...        path('social/', include('social.urls')),        # ...    ]</code></li> </ol>"},{"location":"#e-commerce-example","title":"E-commerce Example","text":"<p>For an e-commerce site:</p> <ol> <li>Create models that reference the User model:    ```python    class Order(models.Model):        user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='orders')        # Other fields...</li> </ol> <p>class ShippingAddress(models.Model):        user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='shipping_addresses')        # Other fields...    ```</p> <ol> <li>Extend the UserProfile model to include customer-specific fields:    ```python    # In your app's models.py    from accounts.models import UserProfile</li> </ol> <p>class CustomerProfile(models.Model):        user_profile = models.OneToOneField(UserProfile, on_delete=models.CASCADE, related_name='customer_profile')        customer_id = models.CharField(max_length=100, blank=True)        loyalty_points = models.IntegerField(default=0)        # Other fields...    ```</p> <ol> <li>Create a signal to create a CustomerProfile when a UserProfile is created:    ```python    from django.db.models.signals import post_save    from django.dispatch import receiver    from accounts.models import UserProfile    from .models import CustomerProfile</li> </ol> <p>@receiver(post_save, sender=UserProfile)    def create_customer_profile(sender, instance, created, **kwargs):        if created:            CustomerProfile.objects.create(user_profile=instance)    ```</p>"},{"location":"#management-commands","title":"Management Commands","text":""},{"location":"#creating-a-superuser","title":"Creating a Superuser","text":"<p>To create a superuser without email verification:</p> <pre><code>python manage.py createsuperuser_email\n</code></pre>"},{"location":"#cleaning-up-deleted-accounts","title":"Cleaning Up Deleted Accounts","text":"<p>To permanently delete accounts that were scheduled for deletion and the grace period has expired:</p> <pre><code># Basic usage - permanently delete accounts soft-deleted over 30 days ago\npython manage.py cleanup_deleted_accounts\n\n# Dry run - see which accounts would be deleted without actually deleting them\npython manage.py cleanup_deleted_accounts --dry-run\n\n# Custom threshold - delete accounts soft-deleted over 60 days ago\npython manage.py cleanup_deleted_accounts --days 60\n\n# Verbose output - show detailed information about each account\npython manage.py cleanup_deleted_accounts --verbose\n\n# Non-interactive mode (for cron jobs) - skip confirmation prompt\npython manage.py cleanup_deleted_accounts --no-input\n</code></pre>"},{"location":"#command-options","title":"Command Options","text":"<ul> <li><code>--dry-run</code>: Show which accounts would be deleted without actually deleting them</li> <li><code>--days</code>: Number of days after which to permanently delete accounts (default: 30)</li> <li><code>--verbose</code>: Show detailed information about each account being processed</li> <li><code>--no-input</code>: Non-interactive mode, skip confirmation prompts</li> </ul>"},{"location":"#recommended-usage","title":"Recommended Usage","text":"<p>For production environments, it's recommended to set up a cron job to run this command regularly:</p> <pre><code># Run every Sunday at 2 AM to clean up accounts deleted over 30 days ago\n0 2 * * 0 /path/to/your/venv/bin/python /path/to/your/project/manage.py cleanup_deleted_accounts --no-input\n\n# Or with logging:\n0 2 * * 0 /path/to/your/venv/bin/python /path/to/your/project/manage.py cleanup_deleted_accounts --no-input &gt;&gt; /var/log/account_cleanup.log 2&gt;&amp;1\n</code></pre>"},{"location":"#safety-features","title":"Safety Features","text":"<ul> <li>Grace Period: Accounts are only deleted after 30 days (configurable)</li> <li>Confirmation Prompt: Interactive confirmation required by default</li> <li>Dry Run Mode: Preview which accounts would be affected</li> <li>Error Handling: Continues processing other accounts if one fails</li> <li>Audit Logging: Detailed logging for compliance and debugging</li> </ul>"},{"location":"#troubleshooting","title":"Troubleshooting","text":""},{"location":"#common-issues","title":"Common Issues","text":"<ol> <li> <p>Migration Issues:    If you encounter migration issues, try:    <code>bash    python manage.py makemigrations    python manage.py migrate --fake-initial</code></p> </li> <li> <p>Template Not Found:    Make sure your template directories are correctly configured in <code>settings.py</code>:    <code>python    TEMPLATES = [        {            'BACKEND': 'django.template.backends.django.DjangoTemplates',            'DIRS': [os.path.join(BASE_DIR, 'templates')],            'APP_DIRS': True,            # ...        },    ]</code></p> </li> <li> <p>Static Files Not Loading:    Make sure your static files are correctly configured in <code>settings.py</code>:    <code>python    STATIC_URL = '/static/'    STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static')]    STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')</code></p> </li> <li> <p>Email Not Sending:</p> </li> <li>Check your email settings in <code>settings.py</code></li> <li> <p>For development, use the console email backend or MailHog (Download and run the MailHog server or check the settings.py file for configuration details)</p> </li> <li> <p>Magic Links Not Working:</p> </li> <li>Ensure <code>MAGIC_LINK_TOKEN_LIFESPAN</code> is set in settings</li> <li>Check that the context processor is properly configured</li> <li> <p>Verify email backend is working correctly</p> </li> <li> <p>Authentication Backend Error:    If you see \"multiple authentication backends configured\" error:</p> </li> <li>Ensure the <code>login_user</code> utility function is used in magic link views</li> <li>Check that user objects have the backend attribute set</li> </ol>"},{"location":"#getting-help","title":"Getting Help","text":"<p>If you encounter any issues not covered in this guide, please:</p> <ol> <li>Check the Django documentation: https://docs.djangoproject.com/</li> <li>Open an issue on the GitHub repository</li> <li>Contact the maintainers at brandnova89@gmail.com</li> </ol>"},{"location":"#file-structure","title":"File Structure","text":""},{"location":"#accounts-app","title":"Accounts App","text":"<pre><code>accounts/\n\u251c\u2500\u2500 management/\n\u2502   \u2514\u2500\u2500 commands/\n\u2502       \u251c\u2500\u2500 createsuperuser_email.py\n\u2502       \u2514\u2500\u2500 cleanup_deleted_accounts.py\n\u251c\u2500\u2500 migrations/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 ... (migration files)\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 accounts/\n\u2502       \u251c\u2500\u2500 auth/\n\u2502       \u2502   \u251c\u2500\u2500 email_change.html\n\u2502       \u2502   \u251c\u2500\u2500 login.html\n\u2502       \u2502   \u251c\u2500\u2500 magic_link_request.html\n\u2502       \u2502   \u251c\u2500\u2500 password_change.html\n\u2502       \u2502   \u251c\u2500\u2500 password_reset.html\n\u2502       \u2502   \u251c\u2500\u2500 password_reset_confirm.html\n\u2502       \u2502   \u2514\u2500\u2500 signup.html\n\u2502       \u251c\u2500\u2500 emails/\n\u2502       \u2502   \u251c\u2500\u2500 activation_email.html\n\u2502       \u2502   \u251c\u2500\u2500 base_email.html\n\u2502       \u2502   \u251c\u2500\u2500 email_change.html\n\u2502       \u2502   \u251c\u2500\u2500 login_notification.html\n\u2502       \u2502   \u251c\u2500\u2500 magic_link_email.html\n\u2502       \u2502   \u251c\u2500\u2500 magic_link_requested.html\n\u2502       \u2502   \u251c\u2500\u2500 password_change_notification.html\n\u2502       \u2502   \u251c\u2500\u2500 password_reset_email.html\n\u2502       \u2502   \u2514\u2500\u2500 welcome_email.html\n\u2502       \u251c\u2500\u2500 profile/\n\u2502       \u2502   \u251c\u2500\u2500 edit_profile.html\n\u2502       \u2502   \u251c\u2500\u2500 edit_profile_images.html\n\u2502       \u2502   \u2514\u2500\u2500 profile.html\n\u2502       \u2514\u2500\u2500 security/\n\u2502           \u2514\u2500\u2500 security_settings.html\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 admin.py\n\u251c\u2500\u2500 apps.py\n\u251c\u2500\u2500 backends.py\n\u251c\u2500\u2500 context_processors.py\n\u251c\u2500\u2500 forms.py\n\u251c\u2500\u2500 magic_links.py\n\u251c\u2500\u2500 models.py\n\u251c\u2500\u2500 pipeline.py\n\u251c\u2500\u2500 signals.py\n\u251c\u2500\u2500 tokens.py\n\u251c\u2500\u2500 urls.py\n\u251c\u2500\u2500 utils.py\n\u251c\u2500\u2500 views.py\n\u2514\u2500\u2500 widgets.py\n</code></pre>"},{"location":"#two-factor-authentication-app","title":"Two-Factor Authentication App","text":"<pre><code>twofactor/\n\u251c\u2500\u2500 migrations/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 ... (migration files)\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 twofactor/\n\u2502       \u251c\u2500\u2500 emails/\n\u2502       \u2502   \u251c\u2500\u2500 base_email.html\n\u2502       \u2502   \u2514\u2500\u2500 otp_email.html\n\u2502       \u251c\u2500\u2500 backup_codes.html\n\u2502       \u251c\u2500\u2500 base_2fa.html\n\u2502       \u251c\u2500\u2500 change_2fa_method.html\n\u2502       \u251c\u2500\u2500 disable_2fa.html\n\u2502       \u251c\u2500\u2500 security_settings.html\n\u2502       \u251c\u2500\u2500 setup_2fa.html\n\u2502       \u251c\u2500\u2500 setup_totp.html\n\u2502       \u251c\u2500\u2500 verify_2fa.html\n\u2502       \u2514\u2500\u2500 verify_email_otp.html\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 admin.py\n\u251c\u2500\u2500 apps.py\n\u251c\u2500\u2500 forms.py\n\u251c\u2500\u2500 middleware.py\n\u251c\u2500\u2500 models.py\n\u251c\u2500\u2500 signals.py\n\u251c\u2500\u2500 urls.py\n\u251c\u2500\u2500 utils.py\n\u2514\u2500\u2500 views.py\n</code></pre>"},{"location":"#core-app","title":"Core App","text":"<pre><code>core/\n\u251c\u2500\u2500 migrations/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 ... (migration files)\n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 base.html\n\u2502   \u2514\u2500\u2500 home.html\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 admin.py\n\u251c\u2500\u2500 apps.py\n\u251c\u2500\u2500 context_processors.py\n\u251c\u2500\u2500 models.py\n\u251c\u2500\u2500 urls.py\n\u2514\u2500\u2500 views.py\n</code></pre> <p>This completes the updated setup guide for the Django Authentication System with Magic Links and Security Preferences. For more information, please refer to the documentation or contact the maintainers.</p>"}]}